from darkflow.net.build import TFNet
import cv2
import requests
import json

options = {"model": "cfg/yolo.cfg", "load": "bin/yolo.weights", "threshold": 0.2}

tfnet = TFNet(options)

img = cv2.imread('./sample_img/input.png')
mask = cv2.imread('./sample_img/mask.png', 0)
res = cv2.bitwise_and(img,img,mask=mask)
 
result = tfnet.return_predict(res)
URL = "http://www.wix.com/_serverless/coffeeTime/data"

# outJson = str(json.dumps(result,indent=4, sort_keys=True, skipkeys=True))

r = requests.put(URL, json=result)

print('server response', r.status_code, r.text)
